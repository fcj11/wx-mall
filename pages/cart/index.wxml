<view class="cart-container">
  <!-- è´­ç‰©è½¦ä¸ºç©ºæ—¶çš„å±•ç¤º -->
  <view class="cart-empty" wx:if="{{cartList.length === 0}}">
    <view class="empty-icon">ğŸ›’</view>
    <text class="empty-text">è´­ç‰©è½¦è¿˜æ˜¯ç©ºçš„</text>
    <button class="go-shopping" bindtap="handleGoShopping">å»é€›é€›</button>
  </view>

  <!-- è´­ç‰©è½¦æœ‰å•†å“æ—¶çš„å±•ç¤º -->
  <block wx:else>
    <!-- ç¼–è¾‘æ  -->
    <view class="edit-bar">
      <view class="edit-btn" bindtap="handleEdit">
        {{isEdit ? 'å®Œæˆ' : 'ç¼–è¾‘'}}
      </view>
    </view>

    <!-- å•†å“åˆ—è¡¨ -->
    <scroll-view scroll-y class="cart-list" 
                 enhanced="{{true}}" 
                 show-scrollbar="{{false}}"
                 fast-deceleration="{{true}}">
      <view class="cart-item" wx:for="{{cartList}}" wx:key="id">
        <view class="checkbox">
          <icon type="{{item.checked ? 'success' : 'circle'}}" 
                size="20" 
                color="{{item.checked ? '#ff2d4a' : '#999'}}"
                bindtap="handleCheck"
                data-index="{{index}}"/>
        </view>
        <view class="goods-content" bindtap="handleGoodsClick" data-id="{{item.id}}">
          <image class="goods-image" 
                 src="{{item.image}}" 
                 mode="aspectFill"
                 lazy-load/>
          <view class="goods-info">
            <view class="goods-title">{{item.title}}</view>
            <view class="goods-specs">{{item.specs}}</view>
            <view class="price-quantity">
              <text class="goods-price">Â¥{{item.price}}</text>
              <view class="quantity-control">
                <text class="minus {{item.quantity <= 1 ? 'disabled' : ''}}" 
                      catchtap="handleMinus" 
                      data-index="{{index}}">-</text>
                <input class="quantity" 
                       type="number" 
                       value="{{item.quantity}}"
                       bindblur="handleQuantityInput"
                       data-index="{{index}}"/>
                <text class="plus" 
                      catchtap="handlePlus" 
                      data-index="{{index}}">+</text>
              </view>
            </view>
          </view>
        </view>
      </view>
    </scroll-view>

    <!-- åº•éƒ¨ç»“ç®—æ  -->
    <view class="bottom-bar {{isEdit ? 'edit-mode' : ''}}">
      <view class="select-all" bindtap="handleSelectAll">
        <icon type="{{allChecked ? 'success' : 'circle'}}" 
              size="20" 
              color="{{allChecked ? '#ff2d4a' : '#999'}}"/>
        <text>å…¨é€‰</text>
      </view>
      
      <!-- éç¼–è¾‘æ¨¡å¼æ˜¾ç¤ºä»·æ ¼å’Œç»“ç®—æŒ‰é’® -->
      <block wx:if="{{!isEdit}}">
        <view class="total-section">
          <view class="price-section">
            <text>åˆè®¡ï¼š</text>
            <text class="total-price">Â¥{{totalPrice}}</text>
          </view>
          <text class="total-desc">ä¸å«è¿è´¹</text>
        </view>
        <button class="checkout-btn" bindtap="handleCheckout">
          ç»“ç®—({{selectedCount}})
        </button>
      </block>
      
      <!-- ç¼–è¾‘æ¨¡å¼åªæ˜¾ç¤ºåˆ é™¤æŒ‰é’® -->
      <block wx:else>
        <button class="delete-btn" bindtap="handleDelete">
          åˆ é™¤({{selectedCount}})
        </button>
      </block>
    </view>

    <!-- æ·»åŠ åº•éƒ¨å®‰å…¨åŒºåŸŸå ä½ -->
    <view class="safe-area-block"></view>
  </block>
</view>