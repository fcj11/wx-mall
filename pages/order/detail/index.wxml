<view class="order-detail">
  <!-- è®¢å•çŠ¶æ€ -->
  <view class="status-section">
    <view class="status-text">{{order.status === 'UNPAID' ? 'ç­‰å¾…ä¹°å®¶ä»˜æ¬¾' : 'äº¤æ˜“æˆåŠŸ'}}</view>
    <view class="status-desc">{{order.status === 'UNPAID' ? 'è¯·å°½å¿«å®Œæˆæ”¯ä»˜' : 'æ„Ÿè°¢æ‚¨çš„è´­ä¹°'}}</view>
  </view>

  <!-- æ”¶è´§åœ°å€ -->
  <view class="address-section">
    <view class="address-title">æ”¶è´§åœ°å€</view>
    <view class="address-content">
      <view class="user-info">
        <text class="name">{{order.address.name}}</text>
        <text class="phone">{{order.address.phone}}</text>
      </view>
      <view class="address-detail">
        {{order.address.province}}{{order.address.city}}{{order.address.district}}{{order.address.detail}}
      </view>
    </view>
  </view>

  <!-- å•†å“ä¿¡æ¯ -->
  <view class="goods-section">
    <view class="goods-title">å•†å“ä¿¡æ¯</view>
    <view class="goods-list">
      <view class="goods-item" 
            wx:for="{{order.goodsList}}" 
            wx:key="id"
            bindtap="handleGoodsClick"
            data-id="{{item.id}}">
        <image class="goods-image" src="{{item.image}}" mode="aspectFill"/>
        <view class="goods-info">
          <view class="goods-name">{{item.title}}</view>
          <view class="goods-specs">{{item.specs}}</view>
          <view class="price-quantity">
            <text class="price">Â¥{{item.price}}</text>
            <text class="quantity">x{{item.quantity}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- è®¢å•ä¿¡æ¯ -->
  <view class="order-info">
    <view class="info-title">è®¢å•ä¿¡æ¯</view>
    <view class="info-item">
      <text class="label">è®¢å•ç¼–å·</text>
      <text class="value">{{order.id}}</text>
      <text class="copy" catchtap="handleCopy">å¤åˆ¶</text>
    </view>
    <view class="info-item">
      <text class="label">åˆ›å»ºæ—¶é—´</text>
      <text class="value">{{order.createTime}}</text>
    </view>
    <view class="info-item" wx:if="{{order.payTime}}">
      <text class="label">ä»˜æ¬¾æ—¶é—´</text>
      <text class="value">{{order.payTime}}</text>
    </view>
    <view class="info-item" wx:if="{{order.remark}}">
      <text class="label">å¤‡æ³¨ä¿¡æ¯</text>
      <text class="value">{{order.remark}}</text>
    </view>
  </view>

  <!-- ä»·æ ¼ä¿¡æ¯ -->
  <view class="price-section">
    <view class="price-item">
      <text class="label">å•†å“æ€»ä»·</text>
      <text class="value">Â¥{{order.totalPrice}}</text>
    </view>
    <view class="price-item">
      <text class="label">è¿è´¹</text>
      <text class="value">å…è¿è´¹</text>
    </view>
    <view class="price-item total">
      <text class="label">å®ä»˜æ¬¾</text>
      <text class="value">Â¥{{order.totalPrice}}</text>
    </view>
  </view>

  <!-- åˆ†äº«æŒ‰é’® -->
  <view class="share-section">
    <button class="share-btn" open-type="share">
      <text class="icon">ğŸ”—</text>
      <text>åˆ†äº«ç»™å¥½å‹</text>
    </button>
    <button class="share-btn" bindtap="handleCreatePoster">
      <text class="icon">ğŸ–¼ï¸</text>
      <text>ç”Ÿæˆæµ·æŠ¥</text>
    </button>
  </view>

  <!-- åˆ†äº«æµ·æŠ¥ç”»å¸ƒï¼ˆéšè—ï¼‰ -->
  <canvas canvas-id="sharePoster" 
          style="width: 750px; height: 1000px; position: fixed; left: -9999px;"/>

  <!-- åº•éƒ¨æŒ‰é’® -->
  <view class="bottom-bar">
    <block wx:if="{{order.status === 'UNPAID'}}">
      <button class="btn" bindtap="handleCancel">å–æ¶ˆè®¢å•</button>
      <button class="btn primary" bindtap="handlePay">ç»§ç»­æ”¯ä»˜</button>
    </block>
    <block wx:else>
      <button class="btn" bindtap="handleDelete">åˆ é™¤è®¢å•</button>
      <button class="btn primary" bindtap="handleBuyAgain">å†æ¬¡è´­ä¹°</button>
    </block>
  </view>

  <!-- åº•éƒ¨å®‰å…¨åŒºåŸŸ -->
  <view class="safe-area-block"></view>
</view> 